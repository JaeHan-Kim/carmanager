<!DOCTYPE HTML>
<!-- 현재 스크립트나 CSS 임포트는 각 기능이 있는 위치에 쓰여있기 때문에 
     실제로 사용할 때 정리해서 사용할 것을 권장합니다. -->
<html>
<head>
<title>내 차를 부탁해 - 맞춤 서비스 페이지</title>
	
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

	<script type="application/x-javascript">
	  addEventListener("load", function() { 
	  setTimeout(hideURLbar, 0); }, false); 
	  function hideURLbar(){ 
	  window.scrollTo(0,1); } 
	</script>

	<!-- Bootstrap Core CSS -->
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
	<link type='text/css' rel='stylesheet' href="../css/main/bootstrap.css" />
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet">
	<!-- Custom CSS 메뉴바()메뉴내용, 상단, 차트박스, 글자색 스타일 -->
	<link type='text/css' rel='stylesheet' href="../css/main/style.css" />
	<!-- font CSS -->
	<!-- font-awesome icons 빈칸 유지를 위해 링크를 막아둠 -->
	<!--<link href="../css/main/test/font-awesome.css" rel="stylesheet"> -->
	<!-- //font-awesome icons -->
	<!-- js-->
	<script src="../js/main/jquery-1.11.1.min.js"></script>
	<script src="../js/main/modernizr.custom.js"></script>
	<!--webfonts 없어도 되는듯.. 하지만 삭제 금지-->
	<link type='text/css' rel='stylesheet'
	      href='//fonts.googleapis.com/css?family=Roboto+Condensed:400,300,300italic,400italic,700,700italic'>
	<!--//webfonts-->
	<!--animate-->
	<link type="text/css" rel="stylesheet" media="all" href="../css/main/animate.css" >
	<script src="../js/main/wow.min.js"></script>
	<!-- --- -->
	<link rel="stylesheet" type="text/css" href="../css/goods/slick.css"/>
  <link rel="stylesheet" type="text/css" href="../css/goods/slick-theme.css"/>
  <link rel="stylesheet" type="text/css" href="../css/goods/goods.css"/>
  <script type="text/javascript" src="../js/goods/slick.min.js"></script>
	<!-- --- -->
	<script>
	  new WOW().init();
	  $(document).ready(function(){ 
	    var userNickname = sessionStorage.getItem('loginUserNickname')+ "님";
	    var userCarNo = sessionStorage.getItem('selectCarNo');
	    var userPhoto = sessionStorage.getItem('loginUserPhoto');
	    $("#userNickname").html(userNickname);
	    $("#thumbnail").attr("src", "../img/member/m-" + userPhoto + ".png");
	 });  
	</script>
	<!--//end-animate-->
	
	<!-- chart 챠트 -->
	<script src="../lib/Chart.js/Chart.js"></script>
	<!-- 차트에 날짜 데이터 이용하기 -->
	<script type="text/javascript" src="../js/main/moment_local.js"></script>
	<!-- //chart -->
	
	<!-- Metis Menu -->
	<script src="../js/main/metisMenu.min.js"></script>
	<script src="../js/main/custom.js"></script>
	<link rel="stylesheet" href="../css/main/custom.css">
	<!--//Metis Menu -->
	<!-- 차량 선택 라이브러리 -->
	<link rel="stylesheet" href="../css/main/default.css">
	<script src="../js/main/jquery.selecty.js"></script>
	<!-- // 차량 선택 라이브러리 -->
</head>

<body class="cbp-spmenu-push">
  <div class="main-content">
    <!--left-fixed -navigation-->
    <div class=" sidebar" role="navigation">
      <div class="navbar-collapse">
        <nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left"
          id="cbp-spmenu-s1">
          <ul class="nav" id="side-menu">
            <li><a href="../main/main.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/dash.png">Dashboard</a></li>
            <li><a href="../mypage/mypage.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/mypage.png">My page</a></li>
            <li><a href="../garage/garage.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/garage.png">차량 등록</a></li>
            <li><a href="../refuel/refuelManager.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/refuel.png">차량 관리</a></li>
            <li><a href="../center/center.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/center.png">정 비 소</a></li>
            <li><a href="../goods/goods.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/goods.png">맞춤 서비스</a></li>
            <li><a href="../community/community.html" class=""><i class="nav_icon"></i><img class="img_menu" src="../img/main/community.png">커뮤니티</a></li>
          </ul>
          <!-- //sidebar-collapse -->
        </nav>
      </div>
    </div>
    <!--left-fixed -navigation-->

    <!-- header-starts -->
    <div class="sticky-header header-section ">
      <div class="header-left">
        <!--toggle button start-->
        <button id="showLeftPush">
          <img class="img_menubtn" src="../img/main/menu.png">
        </button>
        <!--toggle button end-->
        <!--logo -->
        <div class="logo">
          <a href="../main/main.html">
            <h1>내 차를 부탁해</h1>
            <span>간편, 쉽고, 재밌는 시작!</span>
          </a>
        </div>
        <!--//logo-->
        <div class="clearfix"> </div>
      </div>
      <!-- header-left end-->

      <!-- header-right -->
      <div class="header-right">
      
        <!-- 유저별 차량 리스트 -->

        <!-- 유저별 차량 리스트 end -->
 <!-- 로그인 유저 정보 -->
        <div class="profile_details">
          <ul>
            <li class="dropdown profile_details_drop">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <div class="profile_img">
                  <span class="prfil-img">
                    <img id="thumbnail" class="img-rounded" src="" alt=""> 
                  </span>
                  <div class="user-name">
                    <p id="userNickname"></p>
                    <span>반갑습니다 : )</span>
                  </div>
                  <!-- 빈칸 유지를 위한 아이콘 자리 -->
                  <i class="fa fa-angle-down lnr"></i>
                  <i class="fa fa-angle-up lnr"></i>
                  <div class="clearfix"></div>
                </div>
            </a>
              <ul id="myCarList" class="dropdown-menu drp-mnu">
              </ul>
            </li>
          </ul>
       </div>


       <!--  <div class="profile_details_left">
          <div id="selectCarName">
            <h4>현재 선택된 차량은</h4>
            <label id="selectedMyCar"></label>
          </div>
          <div class="clearfix"></div>
        </div> -->

        <!-- 로그인 유저 정보 end -->
        <div class="clearfix"></div>
      </div>
      <!-- header-right -->
      <div class="clearfix"></div>
    </div>
    <!-- //header-ends -->
     <!--   로그 아웃 클릭 이벤트 -->
    <script>
    $.getJSON('../main/list.do?no=' + sessionStorage.getItem("loginUser") + '&carNo='+sessionStorage.getItem("selectCarNo"), function(resultObj) {
      for (var garage of resultObj.data) {
        if (sessionStorage.getItem("selectCarNo") == garage.myCarNo) {
          /* alert(garage.nickName); */
          $('#selectedMyCar').html(garage.nickName);
        }
        $("<li><a class='link' href='#' carNo = '"+ garage.myCarNo +"' carName = '"+ garage.nickName +"'><i class='nav_icon'></i><img class='img_mycar' src='../img/main/mycar.png'>"+ garage.nickName +"</a></li>").appendTo('#myCarList');
     	} 
      $("<li><a class='link' carNo = 'Logout' href='#'><i class='nav_icon'></i><img class='img_logout' src='../img/main/logout.png'>Logout</a></li>").appendTo('#myCarList');
      $("a.link").click(clickLink);
   	});
    function clickLink(event) {
      event.preventDefault();
      /* alert($(event.target).attr("carName")); */
      if ($(event.target).attr("carNo") == 'Logout') {
          sessionStorage.removeItem('loginUserNickname');
      /*  sessionStorage.removeItem('loginUsercarNo'); */
          sessionStorage.removeItem('loginUserPhoto');
          sessionStorage.removeItem('selectCarNo');
          location.href = "../auth/login.html";
      } else {
        /* alert($(event.target).attr("carNo")); */
        $('#selectedMyCar').html($(this).attr("carName"));
        //alert($(event.target).attr("carNo"));
        sessionStorage.setItem('selectCarNo', $(this).attr("carNo"));
        displayItem(0);
      }
      
    }
    </script>
    <!-- main content start-->
    <div id="page-wrapper">
      <div class="main-page">
        <h3 class="title1">소모품이 필요하신가요? 여기서 알려드립니다 :</h3>
        <h4><span id="selectedMyCar"></span>에게 필요한 소모품을 골라보세요. 누르시면 해당 쇼핑몰로 이동합니다.</h4>
    <!-- 각 페이지 안 컨텐츠 시작 부분(붙여 넣기할 때 div 묶인거 주의) -->
    <!-- 상단 제품 표시 폼 시작 -->
    	<!--<h3 class="title1">Forms</h3>-->
				<div class=" form-grids row form-grids-right">
					<div class="widget-shadow " data-example-id="basic-forms"> 
						<div id="bline" class="form-body">
							<form class="form-horizontal"> 
									<div class="slider">
										<div class="col-sm-9">
											<img class="temp partN" no="0" src="../img/refuel/refuel_goods/wiper.png">
											<p>와이퍼</p>
										</div>
										<div class="col-sm-9">
											<img class="partN temp" no="1" src="../img/refuel/refuel_goods/filter.png">
											<p>에어컨필터</p>
										</div>
										<div class="col-sm-9">
											<img class="partN temp" no="2" src="../img/refuel/refuel_goods/breakpad.png" width="90px">
											<p>브레이크패드</p>
										</div>
										<div class="col-sm-9">
											<img class="partN temp" no="3"  src="../img/refuel/refuel_goods/tire.png">
											<p>타이어</p></div>
										<div class="col-sm-9">
											<img class="partN temp" no="4"  src="../img/refuel/refuel_goods/engine.png">
											<p>엔진오일</p></div>
										<div class="col-sm-9">
											<img class="partN temp" no="5"  src="../img/refuel/refuel_goods/missionoil.png">
											<p>미션오일</p></div>
										<div class="col-sm-9">
											<img class="partN temp" no="6"  src="../img/refuel/refuel_goods/breakoil.png" width="90px">
											<p>브레이크오일</p></div>
										<div class="col-sm-9">
											<img class="partN temp" no="7"  src="../img/refuel/refuel_goods/coolant.png">
											<p>부동액</p></div>
										<div class="col-sm-9">
											<img class="partN temp" no="8"  src="../img/refuel/refuel_goods/battery.png">
											<p>베터리</p>
										</div>
										
   								<!-- 	
   									<div class="col-sm-9"><h3 class="temp" ><a class="partN" no="0">와이퍼</a></h3></div>
   									<div class="col-sm-9 partN" ><h3 class="temp"><a class="partN" no="1">에어콘필터</a></h3></div>
   									<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="2">브레이크패드</a></h3></div>
										<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="3">타이어</a></h3></div>
										<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="4">엔진오일</a></h3></div>
 										<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="5">미션오일</a></h3></div>
										<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="6">브레이크오일</a></h3></div>
   									<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="7">부동액</a></h3></div>
 				 						<div class="col-sm-9 partN"><h3 class="temp"><a class="partN" no="8">베터리</a></h3></div> 
 				 					-->
 									</div>
							</form> 
						</div>
					</div>
				</div>
				<!-- 상단 제품 표시 폼 끝 -->
    	<!-- 하단 표시 폼 시작 -->
	  	<div class="forms">
				<div class="form-grids row widget-shadow" data-example-id="basic-forms"> 
				<div class="form-title">
					<h4 id="productName"></h4>
				</div>
					<div class="form-body">
						<div class="media">
							<div class="media-left">
							<img id="productimg0" class="media-object" src="" style="width: 140px; height: 140px;">
							</div>
							<div class="media-body">
							<a id="linkDanawa0" href="#"><h4 id="detailModel0" class="media-heading"></h4></a>
							<p id="detailSummary0"></p>
							<p id="mprice0"></p>
							</div>
							<hr>
							<div class="clearfix"> </div>
							<!-- -------------------- -->
							<div class="media-left">
							<img id="productimg1" class="media-object" src="" style="width: 140px; height: 140px;">
							</div>
							<div class="media-body">
							<a id="linkDanawa1" href="#"><h4 id="detailModel1" class="media-heading"></h4></a>
							<p id="detailSummary1"></p>
							<p id="mprice1"></p>
							</div>
							<hr>
							<div class="clearfix"> </div>
							<!-- -------------------- -->
							<div class="media-left">
							<img id="productimg2" class="media-object" src="" style="width: 140px; height: 140px;">
							</div>
							<div class="media-body">
							<a id="linkDanawa2" href="#"><h4 id="detailModel2" class="media-heading"></h4></a>
							<p id="detailSummary2"></p>
							<p id="mprice2"></p>
							</div>
							<div class="clearfix"> </div>
					</div>
					</div>
				</div>
				<!-- 하단 표시 폼 끝 -->
				
	  	</div>
		<!-- 페이지 끝 -->
    	</div>
    </div>
    <script type="text/javascript">
    var url = "https://apis.daum.net/shopping/search"; // 상품 검색 URL 
  	var key = "430a8185d37196a8b4440aaf9c10fa95" // 상품요청 api key
  	var keyword ;
  	var partName = ["와이퍼", "에어컨필터", "브레이크패드", "타이어", "엔진오일", "미션오일", "브레이크오일", "부동액", "베터리"];
		
  	$("img.partN").click(clickDetailLnk);
    /* $("a.partN").click(clickDetailLnk); */
    function clickDetailLnk(event) {
      event.preventDefault(); 
      displayItem($(event.target).attr("no"));
    }
    function displayItem(no) {
      document.getElementById("productName").innerHTML = partName[no] + "  입니다.";
      var keyword;
      $.getJSON('carInfo.do?no=' + sessionStorage.getItem("selectCarNo"), function(resultObj) {
				var ajaxResult = resultObj.ajaxResult;
        if (ajaxResult.status == "success") {
          var model = ajaxResult.data.model.split(" ")
          if (no < 4) {
        	  keyword = model[0] + " " + partName[no];
          }
          else {
            keyword = partName[no];
          }
          
          $.ajax({type:"get", 
            url: url + "?apikey=" + key + "&q=" + keyword + "&result=3&pageno=1&sort=pop&output=json",
        	  dataType: "jsonp",
        	  	success:function(data) {
        	  	document.getElementById("detailModel0").innerHTML = data.channel.item[0].title;
          	  document.getElementById("detailSummary0").innerHTML = data.channel.item[0].category_name;
          	  document.getElementById("mprice0").innerHTML = "가격 : " + data.channel.item[0].price_min + "원";
          	  $('#linkDanawa0').prop('href', data.channel.item[0].link);
      				$("#productimg0").attr("src",data.channel.item[0].image_url);
      						
      				document.getElementById("detailModel1").innerHTML = data.channel.item[1].title;
          	 	document.getElementById("detailSummary1").innerHTML = data.channel.item[1].category_name;
          	 	document.getElementById("mprice1").innerHTML = "가격 : " + data.channel.item[1].price_min + "원";
          	  $('#linkDanawa1').prop('href', data.channel.item[1].link);
      				$("#productimg1").attr("src",data.channel.item[1].image_url);
      						
      				document.getElementById("detailModel2").innerHTML = data.channel.item[2].title;
          	  document.getElementById("detailSummary2").innerHTML = data.channel.item[2].category_name;
          	  document.getElementById("mprice2").innerHTML = "가격 : " + data.channel.item[2].price_min + "원";
          	  $('#linkDanawa2').prop('href', data.channel.item[0].link);
      				$("#productimg2").attr("src",data.channel.item[2].image_url);
        	  	},
        	  	error:function(request, status, error) {
        	  		alert("실패");
        	  	}
        	  });
        }
      }); 
    }
    $(document).ready(function(){
      displayItem(0);
      $('.slider').slick({
        dots: false,
        infinite: true,
        prevArrow: '<img src="../img/goods/preview.png" width = "70px" height = "70px" class="slick-prev">',
        nextArrow: '<img src="../img/goods/next.png"  width = "70px" height = "70px" class="slick-next">',
        speed: 300,
        slidesToShow: 4,
        slidesToScroll: 3,
        responsive: [
          {
            breakpoint: 1024,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3,
            }
          },
          {
            breakpoint: 600,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 2
            }
          },
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }
          }
        ]
      });
    });
  </script>
    <!--footer-->
    <div class="footer">
      <p>
        &copy; 2016 Java76th 태웅 재한 영호 다인. All Rights Reserved | Project by <a href="" target="_blank">내 차를 부탁해</a>
      </p>
    </div>
    <!--//footer-->
  </div>


  <!-- Classie 메뉴 접히고 펼쳐지는 부분` -->
  <script src="../js/main/classie.js"></script>
  <script>
    var menuLeft = document.getElementById('cbp-spmenu-s1'), 
        showLeftPush = document.getElementById('showLeftPush'), 
        body = document.body;

    showLeftPush.onclick = function() {
      classie.toggle(this, 'active');
      classie.toggle(body, 'cbp-spmenu-push-toright');
      classie.toggle(menuLeft, 'cbp-spmenu-open');
      disableOther('showLeftPush');
    };

    function disableOther(button) {
      if (button !== 'showLeftPush') {
        classie.toggle(showLeftPush, 'disabled');
      }
    }
  </script>
  <!--scrolling js 스크롤바 조정-->
  <script src="../js/main/jquery.nicescroll.js"></script>
  <script src="../js/main/scripts.js"></script>
  <!--//scrolling js-->
  <!-- Bootstrap Core JavaScript -->
  <script src="../js/main/bootstrap.js"></script>
</body>
</html>